-- 1. Очистка (с каскадным удалением зависимостей)
TRUNCATE organization_activities, organization_phones, organizations, activities, buildings RESTART IDENTITY CASCADE;

-- 2. Деятельность (Категории)
INSERT INTO activities (id, name, parent_id, level) VALUES
(1, 'Еда', NULL, 1),
(2, 'Автомобили', NULL, 1);

INSERT INTO activities (id, name, parent_id, level) VALUES
(3, 'Мясная продукция', 1, 2),
(4, 'Молочная продукция', 1, 2),
(5, 'Грузовые', 2, 2),
(6, 'Легковые', 2, 2);

INSERT INTO activities (id, name, parent_id, level) VALUES
(7, 'Запчасти', 6, 3),
(8, 'Аксессуары', 6, 3);

-- Обновляем счетчик ID для activities
SELECT setval('activities_id_seq', (SELECT MAX(id) FROM activities));


-- 3. Здания (20 реальных локаций: рынки, ТЦ, промзоны)
INSERT INTO buildings (id, address, location) VALUES
-- ЕДА: Фуд Сити (Калужское ш.)
(1, 'г. Москва, Калужское шоссе, 22-й км, 10', ST_GeogFromText('SRID=4326;POINT(37.4290 55.6025)')),
-- ЕДА: Даниловский рынок
(2, 'г. Москва, ул. Мытная, 74', ST_GeogFromText('SRID=4326;POINT(37.6205 55.7122)')),
-- ЕДА: Депо Лесная
(3, 'г. Москва, ул. Лесная, 20с3', ST_GeogFromText('SRID=4326;POINT(37.5915 55.7805)')),
-- ЕДА: Усачевский рынок
(4, 'г. Москва, ул. Усачева, 26', ST_GeogFromText('SRID=4326;POINT(37.5680 55.7270)')),

-- АВТО: ТЦ Южный Порт (Кожуховская)
(5, 'г. Москва, ул. Южнопортовая, 22', ST_GeogFromText('SRID=4326;POINT(37.6965 55.7065)')),
-- АВТО: Кунцево Автомолл
(6, 'г. Москва, ул. Горбунова, 14', ST_GeogFromText('SRID=4326;POINT(37.3950 55.7190)')),
-- АВТО: АТЦ Москва (Каширка)
(7, 'г. Москва, Каширское шоссе, 61к3А', ST_GeogFromText('SRID=4326;POINT(37.7180 55.6150)')),
-- АВТО: Major City (Новая Рига)
(8, 'г. Москва, Новорижское ш., 9 км от МКАД', ST_GeogFromText('SRID=4326;POINT(37.2400 55.7950)')),
-- АВТО: Рольф Химки
(9, 'г. Химки, Ленинградское ш., вл21', ST_GeogFromText('SRID=4326;POINT(37.4200 55.8900)')),
-- АВТО: Формула Х (МКАД 27км)
(10, 'г. Москва, МКАД, 27-й км, вл1', ST_GeogFromText('SRID=4326;POINT(37.7050 55.5750)')),

-- ОФИСЫ/СМЕШАННЫЕ: Москва-Сити (Федерация)
(11, 'г. Москва, Пресненская наб., 12', ST_GeogFromText('SRID=4326;POINT(37.5380 55.7495)')),
-- ПРОМЗОНА: Очаково
(12, 'г. Москва, ул. Рябиновая, 44', ST_GeogFromText('SRID=4326;POINT(37.4350 55.6950)')),
-- ПРОМЗОНА: Коровино
(13, 'г. Москва, ул. Ижорская, 8', ST_GeogFromText('SRID=4326;POINT(37.5250 55.8900)')),
-- ПРОМЗОНА: Бирюлево
(14, 'г. Москва, ул. Подольских Курсантов, 26', ST_GeogFromText('SRID=4326;POINT(37.6350 55.6000)')),
-- ТЦ: Авиапарк
(15, 'г. Москва, Ходынский б-р, 4', ST_GeogFromText('SRID=4326;POINT(37.5300 55.7900)')),
-- ТЦ: Европейский
(16, 'г. Москва, пл. Киевского Вокзала, 2', ST_GeogFromText('SRID=4326;POINT(37.5660 55.7445)')),
-- ЖИЛОЙ ДОМ: Центр (Тверская)
(17, 'г. Москва, ул. Тверская, 17', ST_GeogFromText('SRID=4326;POINT(37.6060 55.7630)')),
-- ЖИЛОЙ ДОМ: Спальный (Бутово)
(18, 'г. Москва, ул. Скобелевская, 1', ST_GeogFromText('SRID=4326;POINT(37.5500 55.5500)')),
-- ЖИЛОЙ ДОМ: Спальный (Митино)
(19, 'г. Москва, ул. Митинская, 36', ST_GeogFromText('SRID=4326;POINT(37.3600 55.8450)')),
-- ЖИЛОЙ ДОМ: Спальный (Выхино)
(20, 'г. Москва, ул. Вешняковская, 18', ST_GeogFromText('SRID=4326;POINT(37.8100 55.7150)'));

SELECT setval('buildings_id_seq', (SELECT MAX(id) FROM buildings));


-- 4. Организации (105 штук)
INSERT INTO organizations (id, name, building_id) VALUES
-- === Мясная продукция (id=3) ===
-- Фуд Сити (b_id=1)
(1, 'Мираторг Опт', 1),
(2, 'Мясной Дом Бородина', 1),
(3, 'Ремит Фирменный', 1),
(4, 'Праймбиф Бутик', 1),
(5, 'МясоЕсть', 1),
-- Даниловский (b_id=2)
(6, 'Праймбиф Бар', 2),
(7, 'Мясная Лавка Воронеж', 2),
(8, 'ИП Саркисян', 2),
(9, 'Дагестанская Баранина', 2),
-- Усачевский (b_id=4)
(10, 'Meat Point', 4),
(11, 'Стейк и Вино', 4),
(12, 'Фермерская Говядина', 4),
-- Обычные магазины (b_id=17-20)
(13, 'МясновЪ', 17),
(14, 'Рублевский', 18),
(15, 'Останкино', 19),
(16, 'Клинский Мясокомбинат', 20),
(17, 'ВкусВилл Мясо', 15),

-- === Молочная продукция (id=4) ===
-- Фуд Сити (b_id=1)
(18, 'Белорусский Молочник', 1),
(19, 'Сыры Алтая', 1),
(20, 'Вологодское Масло', 1),
(21, 'Молочная Культура', 1),
-- Даниловский (b_id=2)
(22, 'Сыроварня Олега Сироты', 2),
(23, 'Козья Ферма', 2),
(24, 'Cheeser', 2),
-- Депо (b_id=3)
(25, 'Сыроварня Novikov', 3),
(26, 'Молочный Бар', 3),
-- Спальники
(27, 'Избенка', 18),
(28, 'Чистая Линия', 19),
(29, 'Домик в Деревне', 12), -- Склад
(30, 'Вимм-Билль-Данн Офис', 11),
(31, 'Молоко Опт', 14),

-- === Грузовые авто (id=5) ===
-- МКАД / Промзоны
(32, 'KAMAZ Центр', 10),
(33, 'GAZ Group Dealer', 10),
(34, 'Scania Сервис', 13),
(35, 'Volvo Trucks', 13),
(36, 'MAN Truck & Bus', 12),
(37, 'ISUZU Rus', 12),
(38, 'HINO Motors', 9),
(39, 'ТракМаркет', 14),
(40, 'ГрузЗапчасть', 10),
(41, 'DAF Service', 8),
(42, 'Foton Motor', 9),
(43, 'BAW Rus', 14),

-- === Легковые: Запчасти (id=7) и Аксессуары (id=8) ===
-- Южный Порт (b_id=5) - "Мекка" запчастей
(44, 'Автозапчасти ВАЗ', 5),
(45, 'JDM Parts', 5),
(46, 'Мир Глушителей', 5),
(47, 'Аккумулятор Рай', 5),
(48, 'Масла и Смазки', 5),
(49, 'Автосвет LED', 5),
(50, 'Коврики.ру', 5),
(51, 'Тюнинг 777', 5),
(52, 'Детали Корея', 5),
(53, 'Запчасти Китай', 5),
(54, 'Разборка BMW', 5),
(55, 'Стекла Авто', 5),
(56, 'Автозвук Профи', 5),
(57, 'Шины Диски', 5),
(58, 'ИП Петров Запчасти', 5),

-- Кунцево (b_id=6)
(59, 'Exist Пункт выдачи', 6),
(60, 'Autodoc', 6),
(61, 'Emex', 6),
(62, 'Колеса Даром', 6),
(63, 'АвтоРусь', 6),
(64, 'Техком', 6),
(65, 'Кэмп', 6),
(66, 'Железяка', 6),
(67, 'Автоэмали', 6),
(68, 'Инструмент Авто', 6),
(69, 'Багажники Thule', 6),
(70, 'Вебасто Рус', 6),

-- АТЦ Москва (b_id=7)
(71, 'Рольф Юг', 7),
(72, 'Genser', 7),
(73, 'Major Auto', 7),
(74, 'АвтоГермес', 7),
(75, 'Фаворит Моторс', 7),
(76, 'Авилон', 7),
(77, 'Трейд-Ин Центр', 7),
(78, 'Выкуп Авто', 7),

-- Major City (b_id=8)
(79, 'Major Toyota', 8),
(80, 'Major Lexus', 8),
(81, 'Major Mazda', 8),
(82, 'Major Mercedes', 8),
(83, 'Major BMW', 8),

-- Рольф (b_id=9)
(84, 'Рольф Mitsubishi', 9),
(85, 'Рольф Hyundai', 9),
(86, 'Рольф Skoda', 9),
(87, 'Рольф Mazda', 9),

-- Разные автомагазины в городе
(88, 'Автомаг', 17),
(89, 'Русь Трейд', 18),
(90, 'Грант Авто', 19),
(91, 'Би-Би', 20),
(92, 'Авто 49', 15),
(93, 'Шинсервис', 14),
(94, 'Вианор', 13),
(95, 'ЕвроАвто', 12),
(96, 'Japan Cars', 16),
(97, 'German Parts', 11),

-- Офисы автокомпаний
(98, 'Яндекс Драйв Офис', 11),
(99, 'Делимобиль Офис', 11),
(100, 'Ситидрайв', 11),
(101, 'Автодор', 11),
(102, 'ЦОДД', 3),
(103, 'Парковки Москвы', 3),
(104, 'МАДИ', 3),
(105, 'МинТранс', 17);

SELECT setval('organizations_id_seq', (SELECT MAX(id) FROM organizations));


-- 5. Телефоны (Генерация для всех 105)
-- Используем случайную генерацию на основе ID для простоты, но с реальными кодами
INSERT INTO organization_phones (org_id, phone)
SELECT
    id,
    '+7 (495) ' || LPAD(((id * 12345) % 9999999)::text, 7, '0')
FROM organizations;

-- Добавим вторые телефоны для крупных хабов
INSERT INTO organization_phones (org_id, phone)
SELECT
    id,
    '+7 (999) ' || LPAD(((id * 54321) % 9999999)::text, 7, '0')
FROM organizations
WHERE id < 50; -- Первым 50 добавим мобильные


-- 6. Связь с деятельностью
INSERT INTO organization_activities (org_id, activity_id) VALUES
-- МЯСО (id 1-17)
(1, 3), (2, 3), (3, 3), (4, 3), (5, 3), (6, 3), (7, 3), (8, 3), (9, 3), (10, 3),
(11, 3), (12, 3), (13, 3), (14, 3), (15, 3), (16, 3), (17, 3),

-- МОЛОКО (id 18-31)
(18, 4), (19, 4), (20, 4), (21, 4), (22, 4), (23, 4), (24, 4), (25, 4), (26, 4),
(27, 4), (28, 4), (29, 4), (30, 4), (31, 4),

-- ГРУЗОВЫЕ (id 32-43)
(32, 5), (33, 5), (34, 5), (35, 5), (36, 5), (37, 5), (38, 5), (39, 5), (40, 5),
(40, 7), -- У грузовых часто есть и запчасти
(41, 5), (42, 5), (43, 5),

-- АВТОЗАПЧАСТИ И АКСЕССУАРЫ (id 44-70, 88-97)
-- Южный порт (44-58)
(44, 7), (45, 7), (46, 7), (47, 8), (48, 8), (49, 8), (50, 8), (51, 8), (52, 7),
(53, 7), (54, 7), (55, 7), (56, 8), (57, 7), (58, 7),

-- Кунцево (59-70)
(59, 7), (60, 7), (61, 7), (62, 7), (62, 8), (63, 7), (63, 8), (64, 7), (65, 7),
(66, 7), (67, 8), (68, 8), (69, 8), (70, 7),

-- Разные магазины (88-97)
(88, 8), (89, 7), (90, 7), (91, 7), (92, 7), (93, 7), (94, 7), (95, 7), (96, 7), (97, 7),

-- ДИЛЕРЫ ЛЕГКОВЫЕ (id 71-87) -> Ставим им "Легковые" (6) + "Запчасти" (7)
(71, 6), (71, 7),
(72, 6), (72, 7),
(73, 6), (73, 7),
(74, 6), (74, 7),
(75, 6), (75, 7),
(76, 6), (76, 7),
(77, 6),
(78, 6),
(79, 6), (79, 7),
(80, 6), (80, 7),
(81, 6), (81, 7),
(82, 6), (82, 7),
(83, 6), (83, 7),
(84, 6), (84, 7),
(85, 6), (85, 7),
(86, 6), (86, 7),
(87, 6), (87, 7),

-- ОФИСЫ АВТО (Каршеринг/Гос) -> Легковые (6) или Грузовые (5)
(98, 6), (99, 6), (100, 6),
(101, 5), (101, 6),
(102, 6), (103, 6), (104, 5), (105, 5);
